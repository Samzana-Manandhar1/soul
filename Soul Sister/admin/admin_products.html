
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Product Upload</title>
</head>
<body>
  <h1>Add Product</h1>
  <form id="addProductForm" enctype="multipart/form-data">
    <input name="name" placeholder="Product Name" required><br>
    <input name="brand_name" placeholder="Brand Name" required><br>
    <textarea name="description" placeholder="Description" required></textarea><br>
    <input name="price" type="number" step="0.01" placeholder="Price" required><br>
    <input name="stock" type="number" placeholder="Stock" required><br>
    <label>Photo 1: <input type="file" name="image1"></label><br>
    <label>Photo 2: <input type="file" name="image2"></label><br>
    <label>Photo 3: <input type="file" name="image3"></label><br>
    <label>Photo 4: <input type="file" name="image4"></label><br>
    <button type="submit">Add Product</button>
  </form>
  <div id="products"></div>
  <script>
    function loadProducts(){
      fetch('admin_products.php')
        .then(res => res.json())
        .then(products => {
          let html = '';
          for(const p of products){
            html += `<div><b>${p.name}</b> (${p.brand_name}) - $${p.price} (stock: ${p.stock})<br>
              ${[p.image1,p.image2,p.image3,p.image4].filter(Boolean).map(img => `<img src="${img}" style="max-width:80px;">`).join('')}
              <button onclick="deleteProduct(${p.id})">Delete</button>
              </div>`;
          }
          document.getElementById('products').innerHTML = html;
        });
    }
    document.getElementById('addProductForm').onsubmit = function(e){
      e.preventDefault();
      let formData = new FormData(this);
      fetch('admin_products.php', {
        method:'POST',
        body: formData
      }).then(r=>r.json()).then(r=>{ if(r.success) { alert('Added'); loadProducts(); } });
    }
    function deleteProduct(id){
      fetch('admin_products.php', {
        method:'DELETE',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({id})
      }).then(r=>r.json()).then(r=>{ if(r.success) loadProducts(); });
    }
    loadProducts();
  </script>
</body>
</html>